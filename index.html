<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Africagridca by AAROC</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Africa Grid CA</h1>
        <h2>The repository of the code which runs the new CA&#39;s for AfricaGrid</h2>
        <a href="https://github.com/AAROC/AfricaGridCA" class="button"><small>View project on</small>GitHub</a>
        <a href="http://www.ei4afica.eu" class="ei"><small>Supported by ei4Africa project</small></a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a name="africagrid-ca" class="anchor" href="#africagrid-ca"><span class="octicon octicon-link"></span></a>AfricaGrid CA</h1>

<p>Originally taken from <a href="https://gilda.ct.infn.it/wikimain?p_p_id=54_INSTANCE_t9W0&amp;p_p_lifecycle=0&amp;p_p_state=normal&amp;p_p_mode=view&amp;p_p_col_id=column-2&amp;p_p_col_count=1&amp;_54_INSTANCE_t9W0_struts_action=%2Fwiki_display%2Fview&amp;_54_INSTANCE_t9W0_nodeName=Main&amp;_54_INSTANCE_t9W0_title=Instructions%20to%20create%20a%20Certification%20Authority">The GILDA AfricaGrid CA guide</a></p>

<h1>
<a name="about" class="anchor" href="#about"><span class="octicon octicon-link"></span></a>About</h1>

<p>The Africa Grid Certification Authority Template allows one to configure and operate a fully-operating Certificate Authority (based on OpenSSL), capable of signing X509 certificates valid for one year, for hosts, users and robots 
The template also provides a basic configuration of the tools needed to operate the CA, such as </p>

<ol>
<li>The web server</li>
<li>Creation of Certificate Revocation Lists (CRL)</li>
<li>Generation of an rpm for distribution of the root CA cert</li>
<li>Creation of Registration Authorities</li>
</ol><p>The CA is managed via a script <code>runCA</code> which has a graphical frontend (zenity); an ncurses version is also under development.</p>

<h1>
<a name="prerequisites" class="anchor" href="#prerequisites"><span class="octicon octicon-link"></span></a>Prerequisites</h1>

<p>The installation assumes a LAMP setup : </p>

<ol>
<li>CEntOS server (x86_64)</li>
<li>mysql server</li>
<li>Apache web server with php</li>
</ol><p>Ansible is used to execute the configuration</p>

<h1>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h1>

<p>the AfricaGrid CA Template is available in this repository. You can install the CA with the provided Ansible playbooks. Previous versions of software are  distributed via <a href="http://gilda.ct.infn.it/africagrid-certification-authority-template">rpm</a>.</p>

<h2>
<a name="updating-from-an-existing-installation" class="anchor" href="#updating-from-an-existing-installation"><span class="octicon octicon-link"></span></a>Updating from an existing installation</h2>

<p>If you have already installed an older version of the CA Template (&lt;1.14),
and you want to preserve the existing configuration, issued certificates, etc use the <a href="../blob/master/updateCA.sh">update script</a> in the top-level directory. This will update the internal database to allow for the creation of RA's, which can bed done at this point.</p>

<h2>
<a name="installing-from-scratch" class="anchor" href="#installing-from-scratch"><span class="octicon octicon-link"></span></a>Installing from scratch</h2>

<p>An Ansible playbook is provided to make basic configuration changes:</p>

<ol>
<li>Firewall: httpd needs to be reachable from the outside (ports 443 and 80</li>
<li>Sendmail: needs to be working properly, as well as capable of delivering email.</li>
<li>SELinux: disabled</li>
</ol><h2>
<a name="first-time-configuration" class="anchor" href="#first-time-configuration"><span class="octicon octicon-link"></span></a>First-time configuration</h2>

<p>Once you've run the Ansible pre-config, the first-time configuration of the CA is done.  This is currently done with runCA, but could be done with Ansible as well. 
There are a few important variables which need to be set in order to complete first-time configuration:</p>

<ol>
<li>
<strong>Country Code</strong>: The ISO Country Code is a two-letter code identifying your Country and appears in every certificate subject. See <a href="http://en.wikipedia.org/wiki/ISO_3166-1">http://en.wikipedia.org/wiki/ISO_3166-1</a>
</li>
<li>
<strong>Organization Unit</strong>: a string that will uniquely identify your CA. You
may put the name of your project, experiment or your institution. <em>Note: choose a name with no spaces</em>.</li>
<li>
<strong>The CA passphrase</strong>: this will be used to decrypt the private key which is required to sign all requests. Of course, this passphrase should be kept extremely safe; if it's lost or stolen, you will have to recreate the CA from scratch, and the certificates already signed would be no longer valid.</li>
<li>
<strong>Logo</strong>: The initial script provides for making a small customization to the website template by uploading a logo. This will be placed in the top-lefthand-side of the CA web site.</li>
<li>
<strong>Administrator email</strong>:  This is the email address of the administrator of the CA. Note that you must be able to read email at this address, since it is associated with the first issued certificate and Registration Authority (see below).</li>
</ol><p>Insertion of email will trigger the creation of the CA root certificate and configures the website and webserver. Once the CA has passed initial configuration, you will be presented with an <em>RA code</em>. The RA code shown at this stage is associated to the email of the CA manager inserted above, which is also the first certificate created, immediately after the CA configuration. 
Save this code and use it to apply for the first certificate using the email previously inserted.</p>

<p>You should be able to see the newly configured CA running at http:///CA</p>

        </section>

        <aside id="sidebar">
          <a href="https://github.com/AAROC/AfricaGridCA/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/AAROC/AfricaGridCA/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/AAROC/AfricaGridCA"></a> is maintained by <a href="https://github.com/AAROC">AAROC</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>
